<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />

    <!-- <meta name="viewport" content="width=device-width, initial-scale=1" /> -->
    <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0 " />
    <meta name="theme-color" content="#000000" />
    <meta name="description" content="Web site created using create-react-app" />


    <title>青年党史“晓”馆</title>
    <link rel="icon" href="%REACT_APP_BASE_URL%/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="%REACT_APP_BASE_URL%/reset.css">
    <link rel="stylesheet" href="%REACT_APP_BASE_URL%/font.css">


</head>

<body>

    <div id="root"></div>
    <script>
        // const token =
        //   "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJvcGVuaWQiOiJvdVJDeWppeVkzQVZkZ0w3RTZDQlRHTFpzWTNrIiwiZXhwIjo1MjA5MjQ3NzMxLCJpc3MiOiJteS1wcm9qZWN0In0.JCXT0t0y-fKAYcUmqj4rTR_APeEbsCfCsQ8nKUBDMUk#/";
        const token = document.location.href.split("headimgurl=")[1];
        if (token && token.length) {
            localStorage.setItem("openid_token2", token);
            const {
                exp,
                openid
            } = JSON.parse(atob(token.split(".")[1]));
            if (!openid) {
                localStorage.removeItem("openid_token2");
                window.location.href =
                    "https://be-prod.redrock.team/magicloop/rushb?b=https://fe-prod.redrock.team/four-history&scope=oldphp";
            }
            localStorage.setItem("exp", exp);
            localStorage.setItem("openid", openid);
        }
        if (!localStorage.getItem("openid_token2") ||
            (parseInt(localStorage.getItem("exp")) <
                Math.floor(Date.now() / 1000) + 60 * 60 * 24 * 2 &&
                !token)
        ) {
            window.location.href =
                "https://be-prod.redrock.team/magicloop/rushb?b=https://fe-prod.redrock.team/four-history&scope=oldphp";
        }
        let openid1 = localStorage.getItem("openid_token2").split("openid=")[1].split("&oauthstatus=")[0]
        localStorage.setItem("openid", openid1)
    </script>

    <script>
        /* 百度统计代码 */
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?ea5724a20c90e167b94fd02ee19d26c8";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
            /* 下面的代码非常重要！！！ 文档：https://tongji.baidu.com/web/help/article?id=324&type=0 */
            _hmt.push([
                "_requirePlugin",
                "UrlChangeTracker", {
                    shouldTrackUrlChange: function(newPath, oldPath) {
                        return newPath && oldPath;
                    },
                },
            ]);
        })();
    </script>


</body>

</html>